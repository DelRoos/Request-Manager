{% load static %}
{% load i18n %}

<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Utilisé un modele vide</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">


        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  

        <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
        <link href="{% static 'css/icon.css' %}" rel="stylesheet">
        <link href="{% static 'plugins/x-editable/css/bootstrap-editable.css' %}" rel="stylesheet">
        <link href="{% static 'plugins/summernote/summernote-bs4.css' %}" rel="stylesheet">
        <link href="{% static 'css/upload_file.css' %}" rel="stylesheet">


        <style>
            #files-area {
                width: 30%;
                margin: 0 auto;
              }
              
              .file-block {
                border-radius: 10px;
                background-color: rgba(144, 163, 203, 0.2);
                margin: 5px;
                color: initial;
                display: inline-flex;
              }
              .file-block > div.name {
                padding-right: 10px;
                width: max-content;
                display: inline-flex;
              }
              
              .file-delete {
                display: flex;
                width: 24px;
                color: initial;
                background-color: #6eb4ff00;
                font-size: large;
                justify-content: center;
                margin-right: 3px;
                cursor: pointer;
              }
              .file-delete:hover {
                background-color: rgba(144, 163, 203, 0.2);
                border-radius: 10px;
              }
              .file-delete > span {
                transform: rotate(45deg);
              }
        </style>

    </head>
    <body>
        

        {% comment %} {% include 'empty_template/modal_error.html' %}
        {% include 'empty_template/modal_join_piece.html' %} {% endcomment %}


        <div class="container  py-4">
            <div class="container col-12 row d-flex justify-content-between">
                <div>
                    <p style="margin-bottom: 0px;">Nom: <span class="font-weight-bold text-capitalize"> {{ template.student.last_name }}</sppan></p>
                    <p style="margin-bottom: 0px;">Prenom: <span class="font-weight-bold text-capitalize"> {{ template.student.first_name }}</span></p>
                    <p style="margin-bottom: 0px;">Matricule: <span class="font-weight-bold text-capitalize">{{ template.student.matricule }}</span></p>
                    <p style="margin-bottom: 0px;">Email: <span class="font-weight-bold">{{ template.student.email }}</span></p>
                    <p style="margin-bottom: 0px;">Niveau: <span class="font-weight-bold">{{ template.student.niveau }}</span></p>
                    <p style="margin-bottom: 0px;">Filiere: <span class="font-weight-bold">{{ template.student.filiere }}</span></p>
                    <p style="margin-bottom: 0px;">Télephone: <span class="font-weight-bold">{{ template.student.phone }}</span></p>
                </div>
                <div>
                    <div class="justify-content-end">
                        {% language 'fr' %}
                            <p class="flex-row-reverse d-flex"><span>Le <span class="font-weight-bold">{{ template.publish_date }}</span></span></p>
                        {% endlanguage %}

                        <p>A <span class="font-weight-bold">{{ template.responsable }}</p>
                    </div>
                </div>
            </div>

            <div>
                <hr>
            </div>

            <div class="d-flex col-6 pl-0">
                <h5 class="mr-2">Objet:  </h5><span class="font-weight-bold">{{template.objet}}</span>
            </div>

                {% if template.existant == 1 %}
                    <section class="">
                        <div class="container py-3 ">
                        <div class="row d-flex justify-content-center align-items-center h-100">
                            <div class="col-12 p-0">
                    
                            <figure class="bg-light p-4"
                                style="border-left: .35rem solid red; border-top: 1px solid #eee; border-right: 1px solid #eee; border-bottom: 1px solid #eee;">
                                <i class="fas fa-quote-left fa-2x mb-4" style="color: red;"></i>
                                <blockquote class="blockquote pb-2">
                                    <p>
                                        Lors de la sortie de note de 
                                        <span class="badge badge-pill badge-dark">{{template.examen}}</span>
                                        de l'unite d'enseignement 
                                        <span class="badge badge-pill badge-dark">{{template.ue}}</span>
                                        j’ai remarque une difference entre ma note et la note qui est sur les resultat definitif.
                                        En effet j'ai eu la note de 
                                        <span class="badge badge-pill badge-dark">{{template.note2}}</span>
                                        /20
                                        hors sur les resultats on a mis la note de 
                                        <span class="badge badge-pill badge-dark">{{template.note1}}</span>/20
                                    </p>
                                </blockquote>
                                <figcaption class="blockquote-footer mb-0">
                                    <cite title="Source Title">important</cite>
                                </figcaption>
                            </figure>
                    
                            </div>
                        </div>
                        </div>
                    </section>
                {% endif %}

            <div>
                <hr>
            </div>
            {% if template.describe != "undefined" and template.describe is not None %}
                {{ template.describe|safe }}
                <div>
                    <hr>
                </div>
            {% endif %}

            {% if template.request_image.all %}
                <div class="container col-12 row" style="margin-righ: 100px">
                    <h5 class="mr-2">Pieces jointe:  </h5>
                    <div class="" style="display: flex; flex-wrap: wrap; margin: 2px;">

                        {% for item in template.request_image.all %}
                            {% if item.image_url is not None %}
                                <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
                                    <a href="#" class="thumbnail" style="margin: 10px 10px 10px 10px;">
                                        <img src="{{ item.image_url }}" width="100%" alt="...">
                                    </a>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>

                <div>
                    <hr>
                </div>
            {% endif %}
            


            <div class="container row d-flex flex-row-reverse">
                <button type="button" class="btn btn-success" id="save">Envoyer</button>
                <button type="button" class="btn btn-warning mr-3" onclick="location.href='{% url 'request:edit' template.id %}'" id="edit">Editer</button>
                <button type="button" class="btn btn-danger mr-3" id="cancel">Envoyer plus tard</button>
            </div>

            <button id="modal-error" type="button" class="btn btn-primary d-none" data-toggle="modal" data-target=".bd-example-modal-lg">Large modal</button>

            <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">

                    <div class="alert alert-success" role="alert">
                        <div style="display: flex;justify-content: space-between;">
                            <h5 class="modal-title" id="exampleModalLabel">Succès</h5>
                            <button type="button" class="close"  data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <p>La requete a ete deposer aupres de <strong>{{ template.responsable }}</strong>. Un mail lui a ete envoyer.</p>
                    </div>
            </div>
            </div>
        </div>
  
        <script src="{% static 'js/jquery.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/bootstrap.bundle.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'plugins/moment/moment.js' %}" type="text/javascript"></script>
        
        <script>
            $("#save").click(function() {
                document.querySelector("#modal-error").click();
                location.href='{% url 'request:notification' template.id %}';
            });
            $("#cancel").click(function() {
                location.href='{% url 'account:studenttable'%}';
            });

            $(function() {     
                $('a.thumbnail').click(function(e) {
                e.preventDefault();
                $('#image-modal .modal-body img').attr('src', $(this).find('img').attr('src'));
                $("#image-modal").modal('show');
                });
                $('#image-modal .modal-body img').on('click', function() {
                $("#image-modal").modal('hide')
                });
            });
        </script>
        
    </body>
</html>